{
  "type": "object",
  "properties": {
    "mission_directive": {
      "type": "string",
      "description": "A high-clarity, one-sentence command that merges user intent with the SOP goal."
    },
    "target_location": {
      "type": "object",
      "properties": {
        "space": { "type": "string" },
        "folder_list": { "type": "string" }
      },
      "required": ["space", "folder_list"],
      "additionalProperties": false
    },
    "protocol_steps": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Numbered steps the agent must follow."
    },
    "clickup_intelligence": {
      "type": "object",
      "properties": {
        "search_queries": { "type": "array", "items": { "type": "string" } },
        "fields_to_update": {
          "type": "object",
          "properties": {
            "status": { "type": "string" },
            "due_date": { "type": "string" },
            "custom_fields": { "type": "object", "additionalProperties": true }
          },
          "required": ["status", "due_date"],
          "additionalProperties": false
        },
        "required_assets": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["search_queries", "fields_to_update"],
      "additionalProperties": false
    },
    "external_actions": {
      "type": "object",
      "properties": {
        "platform": { "type": "string" },
        "directive": { "type": "string" }
      },
      "required": ["platform", "directive"],
      "additionalProperties": false
    },
    "compliance_warning": {
      "type": "string",
      "description": "Crucial 'DO NOT' rules from the SOP."
    }
  },
  "required": [
    "mission_directive",
    "target_location",
    "protocol_steps",
    "clickup_intelligence",
    "external_actions",
    "compliance_warning"
  ],
  "additionalProperties": false
}
